<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
                    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <link rel="stylesheet" href="http://localhost/omega-test/stylesheets/vendor/qunit-git.css" type="text/css" media="screen" />
  <link rel="stylesheet" href="http://localhost/omega-test/stylesheets/test.css" type="text/css" media="screen" />

  <!-- qunit/pavlov/sinon -->
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/vendor/qunit-git.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/vendor/pavlov.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/vendor/sinon-1.7.3.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/vendor/sinon-qunit-1.0.0.js"></script>

  <!-- three.js -->
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/vendor/three-r62.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/vendor/helvetiker_font/helvetiker_regular.typeface.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/vendor/three/MaskPass.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/vendor/three/CopyShader.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/vendor/three/EffectComposer.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/vendor/three/RenderPass.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/vendor/three/ConvolutionShader.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/vendor/three/BloomPass.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/vendor/three/AdditiveShader.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/vendor/three/ShaderPass.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/vendor/three/OrbitControls.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/vendor/three/THREEx.WindowResize.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/vendor/ShaderParticles.js"></script>

  <!-- omega dependencies -->
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/vendor/jquery-2.0.3.min.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/vendor/jquery-ui-1.10.3.min.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/vendor/jquery.cookie.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/vendor/jquery.timer.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/vendor/jquery.storageapi-1.6.0.min.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/vendor/purl.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/vendor/google_recaptcha_ajax.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/vendor/utf8_encode.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/vendor/md5.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/vendor/rjr/json.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/vendor/rjr/jrw-0.17.1.js"></script>

  <!-- omega core -->
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/omega.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/omega/version.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/ui/resource_loader.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/ui/loader.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/ui/tracker.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/ui/canvas_tracker.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/ui/registry.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/ui/session_validator.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/omega/common.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/config.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/omega/node.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/omega/session.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/omega/user.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/omega/location.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/omega/resource.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/omega/galaxy/gfx.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/omega/galaxy.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/omega/solar_system/gfx.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/omega/solar_system.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/omega/star/gfx.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/omega/star.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/omega/planet/orbit.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/omega/planet/gfx.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/omega/planet.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/omega/asteroid/commands.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/omega/asteroid/gfx.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/omega/asteroid.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/omega/jump_gate.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/omega/ship/commands.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/omega/ship/interact.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/omega/ship/gfx.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/omega/ship.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/omega/station/commands.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/omega/station/interact.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/omega/station/gfx.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/omega/station.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/omega/mission.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/omega/stat.js"></script>

  <!-- omega ui -->
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/ui/dialog.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/ui/command.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/ui/status_indicator.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/ui/canvas/dialog.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/ui/canvas/controls_list.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/ui/canvas/controls.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/ui/canvas/entity_container.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/ui/canvas/skybox.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/ui/canvas/axis.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/ui/canvas/star_dust.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/ui/canvas/lamp.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/ui/canvas/progress_bar.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/ui/canvas.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/ui/effects_player.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/ui/audio_controls.js"></script>

  <!-- omega pages -->
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/ui/pages/index_nav.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/ui/pages/index_dialog.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/pages/index.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/ui/pages/account_details.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/ui/pages/account_dialog.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/pages/account.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/pages/stats.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/javascripts/pages/confirm.js"></script>

  <!-- test setup -->
  <script type="text/javascript" src="http://localhost/omega-test/setup.js"></script>

  <!-- actual tests -->
  <script type="text/javascript" src="http://localhost/omega-test/tests/omega/common.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/tests/omega/node.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/tests/omega/session.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/tests/omega/user.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/tests/omega/location.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/tests/omega/mission.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/tests/omega/galaxy.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/tests/omega/solar_system.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/tests/omega/planet.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/tests/omega/jump_gate.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/tests/omega/asteroid.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/tests/omega/ship.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/tests/omega/station.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/tests/omega/stat.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/tests/ui/dialog.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/tests/ui/command.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/tests/ui/status_indicator.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/tests/ui/effects_player.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/tests/ui/audio_controls.js"></script>

  <script type="text/javascript" src="http://localhost/omega-test/tests/ui/canvas/controls.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/tests/ui/canvas/controls_list.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/tests/ui/canvas/dialog.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/tests/ui/canvas/entity_container.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/tests/ui/canvas/skybox.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/tests/ui/canvas/axis.js"></script>

  <script type="text/javascript" src="http://localhost/omega-test/tests/ui/canvas.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/tests/ui/loader.js"></script>

  <script type="text/javascript" src="http://localhost/omega-test/tests/ui/pages/index_nav.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/tests/ui/pages/index_dialog.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/tests/ui/pages/account_details.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/tests/ui/pages/account_dialog.js"></script>

  <script type="text/javascript" src="http://localhost/omega-test/tests/pages/index.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/tests/pages/account.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/tests/pages/stats.js"></script>
  <script type="text/javascript" src="http://localhost/omega-test/tests/pages/confirm.js"></script>

  <!-- some test data -->
  <script id="fragmentShaderLava" type="x-shader/x-vertex">
    uniform float time;
    uniform vec2 resolution;
    
    uniform float fogDensity;
    uniform vec3 fogColor;
    
    uniform sampler2D texture1;
    uniform sampler2D texture2;
    
    varying vec2 vUv;
    
    void main( void ) {
      vec2 position = -1.0 + 2.0 * vUv;
    
      vec4 noise = texture2D( texture1, vUv );
      vec2 T1 = vUv + vec2( 1.5, -1.5 ) * time  *0.02;
      vec2 T2 = vUv + vec2( -0.5, 2.0 ) * time * 0.01;
    
      T1.x += noise.x * 2.0;
      T1.y += noise.y * 2.0;
      T2.x -= noise.y * 0.2;
      T2.y += noise.z * 0.2;
    
      float p = texture2D( texture1, T1 * 2.0 ).a;
    
      vec4 color = texture2D( texture2, T2 * 2.0 );
      vec4 temp = color * ( vec4( p, p, p, p ) * 2.0 ) + ( color * color - 0.1 );
    
      if( temp.r > 1.0 ){ temp.bg += clamp( temp.r - 2.0, 0.0, 100.0 ); }
      if( temp.g > 1.0 ){ temp.rb += temp.g - 1.0; }
      if( temp.b > 1.0 ){ temp.rg += temp.b - 1.0; }
    
      gl_FragColor = temp;
    
      float depth = gl_FragCoord.z / gl_FragCoord.w;
      const float LOG2 = 1.442695;
      float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );
      fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );
    
      gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
  </script>

  <script id="vertexShaderLava" type="x-shader/x-vertex">
    uniform vec2 uvScale;
    varying vec2 vUv;
    
    void main()
    {
      vUv = uvScale * uv;
      vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
      gl_Position = projectionMatrix * mvPosition;
    }
  </script>
</head>

<body>
 <h1 id="qunit-header">Omega JS Tests</h1>
 <h2 id="qunit-banner"></h2>
 <div id="qunit-testrunner-toolbar"></div>
 <h2 id="qunit-userAgent"></h2>
 <ol id="qunit-tests"></ol>

 <!-- outside fixtures as ajax calls may return after resetting -->
 <div style="display: none">
   <div id="omega_recaptcha"></div>
 </div>

 <!-- gets reset after every test -->
 <div id="qunit-fixture">
   <!-- index navigation -->
   <a id="register_link" >register</a><a id="account_link" style="display: none">account</a><a id="login_link">login</a><a id="logout_link" style="display: none" >logout</a>
   <a id="account_info_update" >update</a>

   <!-- canvas.html.haml -->
   <div id="canvas_controls">
     <div id="locations_list"><ul/></div>
     <div id="entities_list"><ul/></div>
     <div id="missions_button"></div>
     <div id="toggle_axis">
       <input type="checkbox" />
     </div>
     <div id="cam_reset"></div>
     <div id="mute_audio"></div>
   </div>
   <div id="omega_canvas" ></div>
   <div id="omega_entity_container" style="display: none" tabindex="1">
     <div id="entity_container_close"></div>
     <div id="entity_container_contents"></div>
   </div>

   <!-- status_indicator.html.haml -->
   <div id="status_icon"></div>

   <!--- dialog.html.haml -->
   <div id="omega_dialog"></div>
   <div id="login_dialog">
     <input id="login_username" type="text" />
     <input id="login_password" type="password" />
     <input id="login_button"   type="button" />
   </div>
   <div id="login_failed_dialog">
     <div id="login_err" ></div>
   </div>
   <div id="register_dialog">
     <input id="register_username" type="text" />
     <input id="register_password" type="password" />
     <input id="register_email" type="text" />
     <input id="register_button"   type="button" />
   </div>
   <div id="registration_submitted_dialog">
   </div>
   <div id="registration_failed_dialog">
     <div id="registration_err" ></div>
   </div>
   <div id="missions_dialog">
     <div id="missions_list" ></div>
     <div id="completed_missions" ></div>
   </div>
   <div id="assigned_missions_dialog">
     <div id="assigned_mission_title" ></div>
     <div id="assigned_mission_description" ></div>
     <div id="assigned_mission_assigned_time" ></div>
     <div id="assigned_mission_expires" ></div>
   </div>

   <div id="mission_assignment_failed_dialog">
     <div id="mission_assignment_error"></div>
   </div>

   <div id="command_dialog">
     <div id="command_error"></div>
   </div>

   <div id="select_destination_dialog">
     <div id="dest_id"></div>

     <img id="select_destination"/>
     <div id="dest_selection_section">
       <select id="dest_selection"></select>
     </div>

     <img id="select_coordinates"/>
     <div id="coords_selection_section">
       <div id="dest_x"></div>
       <div id="dest_y"></div>
       <div id="dest_z"></div>
       <div id="command_move"></div>
     </div>
   </div>

   <div id="select_attack_target_dialog">
     <div id="attack_id"></div>
     <div id="attack_targets"></div>
   </div>

   <div id="select_docking_station_dialog">
     <div id="dock_id"></div>
     <div id="dock_stations"></div>
   </div>

   <div id="select_mining_target_dialog">
     <div id="mining_id"></div>
     <div id="mining_targets"></div>
   </div>

   <div id="incorrect_passwords_dialog">
   </div>
   <div id="user_update_error_dialog">
     <div id="update_user_error"/>
   </div>
   <div id="user_updated_dialog">
   </div>

   <div id="critical_err_dialog">
     <div id="critical_err"></div>
   </div>


   <div id="account_info_username">
     <input type="text" id="user_username" disabled="true"/>
   </div>
   <div id="account_info_email">
     <input type="text" id="user_email" disabled="true"/>
   </div>
   <div id="account_info_password">
     <input type="password" id="user_password"/>
   </div>
   <div id="account_info_confirm_password">
     <input type="password" id="user_confirm_password"/>
   </div>
   <div id="account_logo">
   </div>
   <div id="account_info_ships"></div>
   <div id="account_info_stations"></div>
   <div id="account_info_badges"></div>

   <div id="stats"><ul/></div>
 </div>
</body>
</html>
